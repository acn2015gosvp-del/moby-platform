?? `backend/api/services` ?붾젆?좊━???꾩껜 援ъ“瑜?遺꾩꽍?섍퀬 媛쒖꽑?먯쓣 ?쒖븞???쒕━寃좎뒿?덈떎. 癒쇱? ?꾩옱 援ъ“瑜??뚯븙?섍퀬, 洹??ㅼ쓬??媛쒖꽑 諛⑹븞???쒖떆?섍쿋?듬땲??

### 1. ?꾩옱 援ъ“ 遺꾩꽍 (As-Is)

癒쇱? `ls -R backend/api/services` 紐낅졊?대줈 ?꾩옱 ?붾젆?좊━ 援ъ“瑜??뺤씤??蹂닿쿋?듬땲??

`run_shell_command` ?꾧뎄媛 ?녿떎???ㅻ쪟媛 諛쒖깮?덉뒿?덈떎. `list_directory`瑜??ъ슜?섏뿬 ?붾젆?좊━ ?댁슜???뺤씤?섍쿋?듬땲??
`backend/api/services/schemas` ?대????뺤씤??蹂닿쿋?듬땲??
?뚭쿋?듬땲?? `backend/api/services/schemas/models` ?대????뺤씤??蹂닿쿋?듬땲??
援ъ“ ?뚯븙???꾪빐 愿??Python ?뚯씪?ㅼ쓽 ?댁슜???쎌뼱蹂닿쿋?듬땲??

?? ?뚯씪 ?댁슜??紐⑤몢 ?뺤씤?덉뒿?덈떎. ?꾩옱 援ъ“??????곸꽭??遺꾩꽍怨?媛쒖꽑 ?쒖븞???꾨옒? 媛숈씠 ?뺣━???쒕┰?덈떎.

### 1. ?꾩옱 援ъ“ 遺꾩꽍 (As-Is)

?꾩옱 `backend/api/services` ?붾젆?좊━ 諛??섏쐞 援ъ“???ㅼ쓬怨?媛숈뒿?덈떎.

```
backend/api/services/
?쒋?? alert_engine.py             # ?듭떖 ?뚮┝ ?됯? 濡쒖쭅
?쒋?? alerts_summary.py           # LLM 湲곕컲 ?뚮┝ ?붿빟 ?쒕퉬???쒋?? anomaly_vector_service.py   # 踰≫꽣 ?곗궛 諛??댁긽?먯? ?먮떒 濡쒖쭅
?쒋?? constants.py                # ?ш컖??Severity) ??怨듯넻 ?곸닔
?쒋?? influx_client.py            # InfluxDB ?대씪?댁뼵???쒋?? llm_client.py               # OpenAI ?대씪?댁뼵???쒋?? mqtt_client.py              # MQTT ?대씪?댁뼵???붴?? schemas/                    # ? 臾몄젣?? ?쒕퉬???대????ㅽ궎留?紐⑤뜽/肄붿뼱 濡쒖쭅 ?쇱옱
    ?쒋?? alert_schema.py
    ?쒋?? sensor_schema.py
    ?붴?? models/
        ?쒋?? core.py
        ?붴?? core/
            ?쒋?? config.py       # ? 臾몄젣?? ?ㅼ젙 ?뚯씪??留ㅼ슦 源딆? 怨녹뿉 ?꾩튂
            ?붴?? logger.py       # ? 臾몄젣?? 濡쒓굅 ?뚯씪??留ㅼ슦 源딆? 怨녹뿉 ?꾩튂
```

#### 紐⑤뱢 梨낆엫 遺꾩꽍

*   **`alert_engine.py`**: ?댁긽 ?먯? 踰≫꽣 ?됯?, ?뚮┝ ?섏씠濡쒕뱶 ?앹꽦 ???듭떖 鍮꾩쫰?덉뒪 濡쒖쭅???섑뻾?⑸땲?? ?ㅻⅨ ?쒕퉬??`anomaly_vector_service`, `alerts_summary`)瑜??몄텧?섎뒗 ?ㅼ??ㅽ듃?덉씠????븷???⑸땲??
*   **`alerts_summary.py`**: `llm_client`瑜??ъ슜?섏뿬 ?뚮┝ ?댁슜???붿빟?섎뒗 梨낆엫留?留↔퀬 ?덉뼱 ??븷 遺꾨━媛 ???섏뼱 ?덉뒿?덈떎.
*   **`anomaly_vector_service.py`**: 踰≫꽣??Norm 怨꾩궛, ?꾧퀎媛?鍮꾧탳 ???쒖닔??怨꾩궛 濡쒖쭅留??대떦?섏뿬 ?ъ궗?⑹꽦???믨퀬 紐낇솗?⑸땲??
*   **`*_client.py`**: InfluxDB, LLM, MQTT ???몃? ?쒕퉬?ㅼ????듭떊???대떦?섎뒗 '?대씪?댁뼵?? ?먮뒗 '?대뙌?? ??븷???⑸땲?? ?몃? ?섏〈?깆쓣 寃⑸━?섎뒗 醫뗭? ?⑦꽩?낅땲??
*   **`constants.py`**: ?щ윭 ?쒕퉬?ㅼ뿉??怨듭쑀?섎뒗 ?곸닔(Enum ??瑜?以묒븰?먯꽌 愿由ы빀?덈떎.

#### 臾몄젣??
1.  **愿?ъ궗 遺꾨━(SoC) ?먯튃 ?꾨같**: 媛????臾몄젣?낅땲?? `services` ?붾젆?좊━??**鍮꾩쫰?덉뒪 濡쒖쭅**??泥섎━?섎뒗 怨녹씠?댁빞 ?⑸땲?? ?섏?留??꾩옱 API???곗씠??紐낆꽭??`schemas`, ?곗씠?곕쿋?댁뒪 紐⑤뜽???꾪븳 `models`, 洹몃━怨????꾩껜???ㅼ젙???ㅻ（??`core`媛 紐⑤몢 `services` ?대????ы븿?섏뼱 ?덉뒿?덈떎. ?대뒗 ?꾨줈?앺듃 援ъ“瑜??쇰??ㅻ읇寃?留뚮뱾怨??좎?蹂댁닔瑜??대졄寃??⑸땲??
2.  **?섎せ???붾젆?좊━ 援ъ“**: `config.py`? `logger.py` 媛숈? ?듭떖 ?ㅼ젙 ?뚯씪??`services/schemas/models/core/` ?쇰뒗 留ㅼ슦 源딄퀬 吏곴??곸씠吏 ?딆? 怨녹뿉 ?덉뒿?덈떎. ???뚯씪?ㅼ? ?꾨줈?앺듃??理쒖긽??`core` ?붾젆?좊━?먯꽌 愿由щ릺?댁빞 ?⑸땲??
3.  **?쇰??ㅻ윭???섏〈??*: `influx_client.py` 媛숈? ?쒕퉬?ㅺ? `from core.config import settings` 援щЦ???ъ슜?섎뒗?? ?대븣 `core`??`services/schemas/models/core`瑜?媛由ы궢?덈떎. ?대뒗 ?섏〈???먮쫫???뚯븙?섍린 ?대졄寃?留뚮벊?덈떎. ?쒕퉬?ㅻ뒗 ?듭떖 紐⑤뱢???섏〈?댁빞吏, ?쒕퉬???섏쐞??紐⑤뜽 ?섏쐞??肄붿뼱???섏〈?섎뒗 寃껋? ?섎せ??援ъ“?낅땲??

### 2. 媛쒖꽑 ?쒖븞 (To-Be)

FastAPI ?꾨줈?앺듃???쇰컲?곸씤 紐⑤쾾 ?щ?? ?꾩옱 肄붾뱶???μ젏???대젮 ?ㅼ쓬怨?媛숈? 援ъ“瑜??쒖븞?⑸땲??

#### ?쒖븞?섎뒗 ?붾젆?좊━ 援ъ“

`backend` ?붾젆?좊━ 援ъ“瑜??ㅼ쓬怨?媛숈씠 ?ы렪?깊븯??寃껋쓣 沅뚯옣?⑸땲??

```
backend/
?쒋?? api/                          # API ?붾뱶?ъ씤??(?쇱슦??
??  ?쒋?? routes_alerts.py
??  ?붴?? routes_sensors.py
?쒋?? core/                         # ? ?좎꽕: ?깆쓽 ?듭떖 ?ㅼ젙, 濡쒓굅 ????  ?쒋?? config.py                 # (湲곗〈 services/schemas/models/core/config.py瑜??닿납?쇰줈 ?대룞)
??  ?붴?? logger.py                 # (湲곗〈 services/schemas/models/core/logger.py瑜??닿납?쇰줈 ?대룞)
?쒋?? models/                       # ? ?좎꽕: DB 紐⑤뜽 (e.g., SQLAlchemy models)
??  ?붴?? alert_model.py
?쒋?? schemas/                      # ? ?좎꽕: API ?곗씠??紐낆꽭 (Pydantic models)
??  ?쒋?? alert_schema.py           # (湲곗〈 services/schemas/alert_schema.py瑜??닿납?쇰줈 ?대룞)
??  ?붴?? sensor_schema.py          # (湲곗〈 services/schemas/sensor_schema.py瑜??닿납?쇰줈 ?대룞)
?쒋?? services/                     # 鍮꾩쫰?덉뒪 濡쒖쭅
??  ?쒋?? alert_engine.py
??  ?쒋?? alerts_summary.py
??  ?쒋?? anomaly_vector_service.py
??  ?쒋?? constants.py
??  ?붴?? clients/                  # ? ?좎꽕(?좏깮?ы빆): ?몃? ?쒕퉬???대씪?댁뼵??洹몃９
??      ?쒋?? __init__.py
??      ?쒋?? influx_client.py      # (湲곗〈 services/influx_client.py瑜??닿납?쇰줈 ?대룞)
??      ?쒋?? llm_client.py         # (湲곗〈 services/llm_client.py瑜??닿납?쇰줈 ?대룞)
??      ?붴?? mqtt_client.py        # (湲곗〈 services/mqtt_client.py瑜??닿납?쇰줈 ?대룞)
?붴?? main.py
```

#### 媛쒖꽑???곸꽭 ?ㅻ챸

1.  **紐낇솗???붾젆?좊━ 遺꾨━ 湲곗?**:
    *   `api/`: HTTP ?붿껌??吏곸젒 諛쏆븘 泥섎━?섎뒗 ?쇱슦?곕쭔 ?꾩튂?⑸땲??
    *   `services/`: ?쒖닔 鍮꾩쫰?덉뒪 濡쒖쭅???대떦?⑸땲?? `api` ?덉씠?대줈遺???몄텧?섎ŉ, ?꾩슂???ㅻⅨ `services`??`models`瑜??ъ슜?⑸땲??
    *   `schemas/`: Pydantic 紐⑤뜽???ъ슜?섏뿬 API ?붿껌/?묐떟???곗씠???뺥깭瑜??뺤쓽?⑸땲?? `api`? `services` 媛꾩쓽 ?곗씠??援먰솚 ?뺤떇?쇰줈 ?ъ슜?⑸땲??
    *   `models/`: ?곗씠?곕쿋?댁뒪 ?뚯씠釉붽낵 留ㅽ븨?섎뒗 ORM 紐⑤뜽??愿由ы빀?덈떎.
    *   `core/`: `config`, `logger` ???꾨줈?앺듃 ?꾨컲?먯꽌 ?ъ슜?섎뒗 ?듭떖 ?좏떥由ы떚瑜?紐⑥븘?〓땲??

2.  **?쒕퉬??遺꾨━ 湲곗? 紐낇솗??*:
    *   **?꾨찓??湲곕컲 遺꾨━**: ?꾩옱 `alert_engine`, `alerts_summary` 泥섎읆 '?뚮┝'?대씪???꾨찓?몄쓣 以묒떖?쇰줈 湲곕뒫????遺꾨━?섏뼱 ?덉뒿?덈떎. ???먯튃???좎??섎뒗 寃껋씠 醫뗭뒿?덈떎.
    *   **?몃? ?섏〈??寃⑸━**: `influx_client`, `llm_client` ?깆? ?몃? ?멸퀎????듭떊???대떦?⑸땲?? ?대뱾??`services/clients/` ? 媛숈씠 蹂꾨룄 ?붾젆?좊━濡?洹몃９?뷀븯硫? "?대? 鍮꾩쫰?덉뒪 濡쒖쭅"怨?"?몃? ?듭떊 濡쒖쭅"????紐낇솗?섍쾶 援щ텇?⑸땲??

3.  **?섏〈???먮쫫 媛쒖꽑**:
    *   **?⑤갑???섏〈??*: `api` ??`services` ??`models` ? 媛숈씠 ?섏〈???먮쫫???꾩뿉???꾨옒濡??먮Ⅴ寃??⑸땲??
    *   **?꾩뿭 ?섏〈??*: 紐⑤뱺 ?덉씠??`api`, `services`, `models`)???꾩슂??`core`??`schemas`???섏〈?????덉뒿?덈떎.
    *   媛쒖꽑??援ъ“?먯꽌??`services/clients/influx_client.py`媛 `from core.config import settings` 泥섎읆 吏곴??곸씤 寃쎈줈濡?`config`瑜?媛?몄삱 ???덉뒿?덈떎.

#### 異붽? ?쒖븞

*   `alert_engine.py` ?대????뺤쓽??`AlertInputModel`, `AlertPayloadModel` ??Pydantic 紐⑤뜽?ㅼ쓣 `schemas/alert_schema.py` ?뚯씪濡???꺼???ㅽ궎留?愿??肄붾뱶瑜???怨녹뿉??愿由ы븯??寃껋쓣 異붿쿇?⑸땲??

?대윭??援ъ“??由ы뙥?좊쭅? ?뱀옣??湲곕뒫 蹂?붾뒗 ?놁?留? ?꾨줈?앺듃媛 而ㅼ?怨?蹂듭옟?댁죱?????좎?蹂댁닔?깃낵 ?뺤옣?깆쓣 ?ш쾶 ?μ긽?쒗궎??湲곕컲????寃껋엯?덈떎.
