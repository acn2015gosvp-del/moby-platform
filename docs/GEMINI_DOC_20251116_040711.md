Loaded cached credentials.
# MOBY ?뚮옯???쒖뒪???꾪궎?띿쿂

**臾몄꽌 踰꾩쟾:** 1.0
**?묒꽦??** 2025??11??16??
## 1. 媛쒖슂

MOBY???곗뾽 ?꾩옣???ㅻ퉬瑜??꾪븳 ?덉륫 ?좎?蹂댁닔(Predictive Maintenance, PdM) IIoT(Industrial IoT) ?뚮옯?쇱엯?덈떎. ?ㅼ뼇???쇱꽌濡쒕????곗씠?곕? ?섏쭛, 遺꾩꽍?섏뿬 ?댁긽 吏뺥썑瑜?媛먯??섍퀬, ?ъ슜?먯뿉寃??ㅼ떆媛??뚮┝怨??ъ링 遺꾩꽍 ??쒕낫?쒕? ?쒓났?⑥쑝濡쒖뜥 ?ㅻ퉬???덉젙?깃낵 媛?⑹꽦??洹밸??뷀븯??寃껋쓣 紐⑺몴濡??⑸땲??

蹂?臾몄꽌??MOBY ?뚮옯?쇱쓽 ?꾩껜 ?쒖뒪???꾪궎?띿쿂, 媛?援ъ꽦 ?붿냼????븷怨??곹샇 ?묒슜, 洹몃━怨??곗씠???먮쫫??????곸꽭??湲곗닠?⑸땲??

## 2. 怨좎닔以 ?꾪궎?띿쿂 (High-Level Architecture)

MOBY ?뚮옯?쇱? ?곗씠???섏쭛, 泥섎━, ??? 遺꾩꽍, ?쒓컖??諛??뚮┝???꾪븳 ?щ윭 ?듭떖 而댄룷?뚰듃濡?援ъ꽦?⑸땲??

```mermaid
graph TD
    subgraph IoT Devices
        A[Vibration Sensor]
        B[Sound Sensor]
        C[Temp/Humidity Sensor]
        D[Other Sensors]
    end

    subgraph Data Pipeline
        E[MQTT Broker]
        F[Backend (FastAPI)]
        G[InfluxDB (Time-Series DB)]
    end

    subgraph Analysis & Visualization
        H[Grafana Dashboards]
        I[Frontend (React/Vite)]
    end

    subgraph Notification System
        J[WebSocket]
        K[Slack]
        L[Email]
    end

    subgraph AI/LLM Service
        M[LLM Client]
        N[Report Generation Service]
    end

    A & B & C & D -- MQTT --> E
    E -- MQTT Subscription --> F
    F -- Stores Data --> G
    F -- Evaluates Rules --> N
    F -- Triggers Alerts --> J & K & L
    G -- Data Source --> H
    G -- Data Source --> I
    F -- REST API --> I
    I -- Displays --> H
    J -- Real-time Alerts --> I
    N -- Uses --> M
    N -- Generates Reports --> I
```

### 二쇱슂 援ъ꽦 ?붿냼:

-   **IoT Devices:** ?꾩옣 ?ㅻ퉬??遺李⑸맂 ?쇱꽌?? MQTT ?꾨줈?좎퐳???듯빐 ?곗씠?곕? 以묒븰 MQTT 釉뚮줈而ㅻ줈 ?꾩넚?⑸땲??
-   **MQTT Broker:** 紐⑤뱺 ?쇱꽌 ?곗씠?곌? 紐⑥씠??以묒븰 硫붿떆吏 ?? 諛깆뿏???쒕쾭媛 援щ룆(subscribe)?섏뿬 ?곗씠?곕? ?섏떊?⑸땲??
-   **Backend (FastAPI):** ?뚮옯?쇱쓽 ?듭떖 ?먮뇤. MQTT濡쒕????곗씠?곕? 諛쏆븘 泥섎━?섍퀬, InfluxDB????ν븯硫? ?댁긽 吏뺥썑瑜??먮떒?섍퀬, ?뚮┝??諛쒖넚?⑸땲?? ?꾨줎?몄뿏?쒖? REST API濡??듭떊?⑸땲??
-   **InfluxDB:** ?쒓퀎???곗씠????μ뿉 理쒖쟻?붾맂 ?곗씠?곕쿋?댁뒪. 紐⑤뱺 ?쇱꽌 ?곗씠?곕? ??ν븯怨?鍮좊Ⅸ 議고쉶瑜?吏?먰빀?덈떎.
-   **Grafana:** InfluxDB ?곗씠?곕? ?쒓컖?뷀븯????쒕낫???? 二쇰줈 ?대? 紐⑤땲?곕쭅 諛??ъ링 遺꾩꽍?⑹쑝濡??ъ슜?⑸땲??
-   **Frontend (React/Vite):** ?ъ슜?먭? 吏곸젒 ?곹샇?묒슜?섎뒗 ???좏뵆由ъ??댁뀡. ?ㅼ떆媛??뚮┝, ?곗씠????쒕낫?? 由ы룷??議고쉶 ?깆쓽 湲곕뒫???쒓났?⑸땲??
-   **Notification System:** ?댁긽 吏뺥썑 諛쒖깮 ??WebSocket, Slack, ?대찓?????ㅼ뼇??梨꾨꼸???듯빐 ?ъ슜?먯뿉寃??뚮┝???꾩넚?⑸땲??
-   **AI/LLM Service:** ?섏쭛???곗씠?곕? 湲곕컲?쇰줈 LLM???쒖슜?섏뿬 ?쇨컙/二쇨컙 遺꾩꽍 由ы룷?몃? ?먮룞 ?앹꽦?⑸땲??

## 3. 而댄룷?뚰듃 ?곸꽭 ?ㅺ퀎

### 3.1. ?곗씠???뚯씠?꾨씪??
#### 3.1.1. ?쇱꽌 諛??곗씠???섏쭛 (IoT Devices)

-   **?쇱꽌 醫낅쪟:** 吏꾨룞, ?뚯쓬, ?⑤룄/?듬룄, 媛?띾룄/?먯씠濡? ?ㅻ퉬 ?ъ씠??移댁슫????-   **?꾨줈?좎퐳:** MQTT (Message Queuing Telemetry Transport)
    -   寃쎈웾 ?꾨줈?좎퐳濡???ъ뼇 ?붾컮?댁뒪 諛?遺덉븞?뺥븳 ?ㅽ듃?뚰겕 ?섍꼍???곹빀?⑸땲??
    -   Publish/Subscribe 紐⑤뜽???ъ슜?섏뿬 ?쇱꽌(Publisher)? 諛깆뿏??Subscriber) 媛꾩쓽 寃고빀?꾨? ??땅?덈떎.
-   **?곗씠???뺤떇:** JSON ?뺤떇?쇰줈 Topic???곕씪 援ъ“?붾맂 ?곗씠?곕? ?꾩넚?⑸땲??
    -   **Topic ?덉떆:** `moby/plant_A/line_1/motor_01/vibration`
    -   **Payload ?덉떆:** `{"timestamp": 1678886400, "value": 0.75, "unit": "g"}`

#### 3.1.2. MQTT 釉뚮줈而?
-   **??븷:** ?쇱꽌濡쒕????ㅻ뒗 紐⑤뱺 ?곗씠?곕? ?섏떊?섍퀬, ?대떦 Topic??援щ룆?섎뒗 ?대씪?댁뼵??諛깆뿏???먭쾶 硫붿떆吏瑜??꾨떖?섎뒗 以묎컻????븷???⑸땲??
-   **援ы쁽:** Mosquitto, RabbitMQ ???쒖? MQTT 釉뚮줈而ㅻ? ?ъ슜?⑸땲??

#### 3.1.3. 諛깆뿏??(FastAPI) - ?곗씠??泥섎━

-   諛깆뿏?쒖쓽 `mqtt_client.py` ?쒕퉬?ㅺ? MQTT 釉뚮줈而ㅼ뿉 ?곌껐?섍퀬 吏?뺣맂 Topic(`moby/#`)??援щ룆?⑸땲??
-   硫붿떆吏 ?섏떊 ?? Pydantic ?ㅽ궎留?`schemas/sensor_schema.py`)瑜??듯빐 ?곗씠???좏슚?깆쓣 寃?ы빀?덈떎.
-   `influx_client.py` ?쒕퉬?ㅻ? ?듯빐 ?뺤젣???곗씠?곕? InfluxDB????ν빀?덈떎.

#### 3.1.4. InfluxDB - ?곗씠?????
-   **Measurement:** ?곗씠??醫낅쪟 (?? `vibration`, `temperature`)
-   **Tags:** ?곗씠???꾪꽣留?諛?洹몃９?붾? ?꾪븳 硫뷀??곗씠??(?? `plant`, `line`, `sensor_id`)
-   **Fields:** ?ㅼ젣 痢≪젙媛?(?? `value`, `rms`, `peak`)
-   **Timestamp:** ?곗씠?곌? ?섏쭛???쒓컙 (紐⑤뱺 ?쒓퀎???곗씠?곗쓽 湲곗?)

### 3.2. 諛깆뿏???꾪궎?띿쿂 (FastAPI)

-   **`main.py`**: FastAPI ?좏뵆由ъ??댁뀡??吏꾩엯?? ?쇱슦?? 誘몃뱾?⑥뼱, ?대깽???몃뱾???쒖옉/醫낅즺)瑜??ㅼ젙?⑸땲??
-   **`api/`**: API ?붾뱶?ъ씤?몃? ?뺤쓽?섎뒗 ?쇱슦??紐⑥쓬.
    -   `routes_sensors.py`: ?쇱꽌 ?곗씠??議고쉶, ?쇱꽌 紐⑸줉 愿由???
    -   `routes_alerts.py`: 諛쒖깮???뚮┝ 紐⑸줉 議고쉶, ?뚮┝ ?곹깭 蹂寃?pending ??acknowledged ??resolved) ??
-   **`services/`**: ?듭떖 鍮꾩쫰?덉뒪 濡쒖쭅 援ы쁽.
    -   `mqtt_client.py`: MQTT 釉뚮줈而ㅼ????듭떊 愿由?
    -   `influx_client.py`: InfluxDB???紐⑤뱺 ?곹샇?묒슜(?곌린, ?쎄린)??異붿긽?뷀븳 ?대씪?댁뼵??
    -   `alert_engine.py`: InfluxDB濡쒕????덈줈???곗씠?곕? 二쇨린?곸쑝濡?議고쉶?섏뿬 ?ъ쟾???뺤쓽??洹쒖튃(Rule)怨?鍮꾧탳. ?꾧퀎媛?珥덇낵, 湲됯꺽??蹂?????댁긽 吏뺥썑瑜??먮떒.
    -   `llm_client.py`: ?몃? LLM API(OpenAI, Gemini ??? ?듭떊?섎뒗 ?대씪?댁뼵??
    -   `alerts_summary.py`: `alert_engine`??媛먯????댁긽 吏뺥썑 ?곗씠?곕? 諛뷀깢?쇰줈 `llm_client`瑜??몄텧?섏뿬 ?먯뿰??遺꾩꽍 由ы룷?몃? ?앹꽦.
-   **`core/`**: ?꾨줈?앺듃 ?꾨컲???ъ슜?섎뒗 怨듯넻 湲곕뒫.
    -   `config.py`: `.env` ?뚯씪?먯꽌 ?섍꼍 蹂?섎? 濡쒕뱶?섏뿬 ?좏뵆由ъ??댁뀡 ?ㅼ젙??愿由?
    -   `logger.py`: ?쒖??붾맂 濡쒓퉭 ?ㅼ젙.
-   **`schemas/`**: Pydantic 紐⑤뜽???ъ슜?섏뿬 API ?붿껌/?묐떟 ?곗씠??援ъ“? ?곗씠?곕쿋?댁뒪 ?ㅽ궎留덈? ?뺤쓽.

### 3.3. ?꾨줎?몄뿏???꾪궎?띿쿂 (React/Vite)

-   **`pages/`**: 媛?URL 寃쎈줈???대떦?섎뒗 硫붿씤 ?섏씠吏 而댄룷?뚰듃 (?? `DashboardPage`, `AlertsPage`).
-   **`components/`**: ?ъ궗??媛?ν븳 UI 而댄룷?뚰듃 (?? `Chart`, `AlertToast`, `DataTable`).
-   **`services/`**: 諛깆뿏??API瑜??몄텧?섎뒗 ?⑥닔 紐⑥쓬 (axios ?먮뒗 fetch ?ъ슜).
-   **`hooks/`**: ?곗씠??fetching, WebSocket ?곌껐, ?곹깭 愿由???諛섎났?섎뒗 濡쒖쭅???댁? 而ㅼ뒪? ??(?? `useSensorData`, `useWebSocket`).
-   **`context/`**: ?꾩뿭 ?곹깭 愿由щ? ?꾪븳 React Context (?? `AuthContext`, `ThemeContext`).
-   **?ㅼ떆媛??듭떊:** WebSocket???듯빐 諛깆뿏?쒕줈遺???ㅼ떆媛??뚮┝???섏떊?섍퀬, ?ъ슜?먯뿉寃?利됱떆 Toast 硫붿떆吏???뚮┝ 諛곗?濡??쒖떆.

### 3.4. ?뚮┝ 諛?由ы룷???쒖뒪??
#### 3.4.1. ?댁긽 吏뺥썑 媛먯? 諛??뚮┝ ?먮쫫

1.  **?곗씠???섏쭛:** ?쇱꽌 ?곗씠?곌? InfluxDB????λ맗?덈떎.
2.  **洹쒖튃 ?됯?:** 諛깆뿏?쒖쓽 `alert_engine.py`???ㅼ?以꾨쭅(?? 1遺꾨쭏?????곕씪 ?덈줈???곗씠?곕? 議고쉶?섍퀬, ?ㅼ젙???뚮┝ 洹쒖튃怨?鍮꾧탳?⑸땲??
3.  **?뚮┝ ?앹꽦:** 洹쒖튃 ?꾨컲 ?? `alert_schema.py`???뺤쓽??援ъ“濡??뚮┝ 媛앹껜瑜??앹꽦?섍퀬 InfluxDB ?먮뒗 蹂꾨룄??DB????ν빀?덈떎. ?뚮┝??珥덇린 ?곹깭??`pending`?낅땲??
4.  **?뚮┝ ?꾪뙆:**
    -   **WebSocket:** 利됱떆 ?꾨줎?몄뿏?쒕줈 ?뚮┝???몄떆?⑸땲??
    -   **Slack/Email:** ?ш컖??criticality)媛 ?믪? ?뚮┝?????吏?뺣맂 梨꾨꼸濡?硫붿떆吏瑜?諛쒖넚?⑸땲??
5.  **?뚮┝ 泥섎━:** ?ъ슜?먭? ?꾨줎?몄뿏?쒖뿉???뚮┝???몄??섎㈃ ?곹깭瑜?`acknowledged`濡?蹂寃쏀븯怨? 臾몄젣 ?닿껐 ??`resolved`濡?蹂寃쏀빀?덈떎.

#### 3.4.2. LLM 湲곕컲 由ы룷???앹꽦

1.  **?곗씠??吏묎퀎:** `alerts_summary.py` ?쒕퉬?ㅺ? ?ㅼ?以꾨쭅(?? 留ㅼ씪 ?먯젙)???곕씪 吏?뺣맂 湲곌컙(吏??24?쒓컙) ?숈븞???뚮┝ ?곗씠?곗? 二쇱슂 ?쇱꽌 ?몃젋?쒕? InfluxDB?먯꽌 吏묎퀎?⑸땲??
2.  **?꾨＼?꾪듃 ?앹꽦:** 吏묎퀎???곗씠?곕? 諛뷀깢?쇰줈 LLM?먭쾶 遺꾩꽍???붿껌???꾨＼?꾪듃瑜??앹꽦?⑸땲??
    -   **?꾨＼?꾪듃 ?덉떆:** "?ㅼ쓬? 吏??24?쒓컙 ?숈븞 諛쒖깮???ㅻ퉬 ?댁긽 吏뺥썑 紐⑸줉怨?二쇱슂 ?쇱꽌 ?곗씠???붿빟?댁빞. ???곗씠?곕? 諛뷀깢?쇰줈 ?ㅻ뒛???ㅻ퉬 ?곹깭瑜?醫낇빀?곸쑝濡??됯??섍퀬, 二쇰ぉ?댁빞 ???뱀씠?ы빆??由ы룷???뺤떇?쇰줈 ?묒꽦?댁쨾."
3.  **LLM ?몄텧:** `llm_client.py`瑜??듯빐 LLM API瑜??몄텧?섍퀬, ?앹꽦???띿뒪??由ы룷?몃? 諛쏆뒿?덈떎.
4.  **由ы룷??????쒖떆:** ?앹꽦??由ы룷?몃? ?곗씠?곕쿋?댁뒪????ν븯怨? ?꾨줎?몄뿏?쒖쓽 由ы룷???섏씠吏?먯꽌 議고쉶?????덈룄濡?API瑜??듯빐 ?쒓났?⑸땲??

## 4. ?곗씠???먮쫫 (Data Flow)

### 4.1. ?쇱꽌 ?곗씠??????쒕낫???쒓컖??
1.  **[Sensor]** ??**[MQTT Broker]**: ?쇱꽌媛 痢≪젙媛믪쓣 MQTT Topic?쇰줈 諛쒗뻾(Publish).
2.  **[MQTT Broker]** ??**[Backend]**: 諛깆뿏?쒓? Topic??援щ룆(Subscribe)?섏뿬 ?곗씠???섏떊.
3.  **[Backend]** ??**[InfluxDB]**: 諛깆뿏?쒓? ?곗씠?곕? ?뚯떛?섍퀬 ?좏슚??寃????InfluxDB?????
4.  **[InfluxDB]** ??**[Frontend/Grafana]**: ?꾨줎?몄뿏???먮뒗 Grafana媛 InfluxDB??荑쇰━?섏뿬 ?곗씠?곕? 媛?몄샂.
5.  **[Frontend/Grafana]** ??**[User]**: 李⑦듃, 洹몃옒?????쒓컖???뺥깭濡??ъ슜?먯뿉寃??쒖떆.

### 4.2. ?댁긽 吏뺥썑 諛쒖깮 ???ъ슜???뚮┝

1.  **[Backend: Alert Engine]** ??**[InfluxDB]**: Alert Engine??二쇨린?곸쑝濡?InfluxDB?먯꽌 理쒖떊 ?곗씠?곕? 議고쉶.
2.  **[Backend: Alert Engine]**: 議고쉶???곗씠?곕? ?ъ쟾???뺤쓽???뚮┝ 洹쒖튃怨?鍮꾧탳.
3.  **[Backend: Alert Engine]** ??**[DB]**: 洹쒖튃 ?꾨컲 ?? ?뚮┝ ?뺣낫瑜?DB??`pending` ?곹깭濡????
4.  **[Backend]** ??**[WebSocket, Slack, Email]**: 諛깆뿏?쒓? ?깅줉??梨꾨꼸濡??뚮┝ 硫붿떆吏瑜?諛쒖넚.
5.  **[WebSocket]** ??**[Frontend]**: ?꾨줎?몄뿏?쒓? ?ㅼ떆媛??뚮┝??諛쏆븘 ?ъ슜?먯뿉寃?利됱떆 ?쒖떆.

## 5. 媛쒕컻 諛?諛고룷

-   **?섍꼍 ?ㅼ젙:** 諛깆뿏?쒖? ?꾨줎?몄뿏??紐⑤몢 `.env` ?뚯씪???듯빐 二쇱슂 ?ㅼ젙(DB 二쇱냼, API ??????愿由ы븯???섍꼍 媛??댁떇?깆쓣 ?믪엯?덈떎.
-   **?먮룞???ㅽ겕由쏀듃:** `scripts/` ?붾젆?좊━ ?????ㅽ겕由쏀듃(`setup.sh`, `deploy.sh`)瑜??듯빐 媛쒕컻 ?섍꼍 ?ㅼ젙, ?섏〈???ㅼ튂, ?꾨줈?뺤뀡 鍮뚮뱶 諛?諛고룷 怨쇱젙???먮룞?뷀빀?덈떎.
-   **而⑦뀒?대꼫??** Docker瑜??ъ슜?섏뿬 媛?而댄룷?뚰듃(諛깆뿏?? ?꾨줎?몄뿏?? InfluxDB, Grafana ??瑜?而⑦뀒?대꼫?뷀븯??諛고룷???쇨??깃낵 ?뺤옣?깆쓣 ?뺣낫?섎뒗 寃껋쓣 沅뚯옣?⑸땲??
