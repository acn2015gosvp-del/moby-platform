## MOBY ?뚮옯???곗씠???뚯씠?꾨씪???꾪궎?띿쿂

### 1. 媛쒖슂

??臾몄꽌??MOBY ?덉륫 ?좎?蹂댁닔(PdM) ?뚮옯?쇱쓽 ?듭떖 ?곗씠???뚯씠?꾨씪???꾪궎?띿쿂瑜??ㅻ챸?⑸땲?? ???뚯씠?꾨씪?몄? ?곗뾽 ?꾩옣???쇱꽌濡쒕????곗씠?곕? ?섏쭛?섏뿬 理쒖쥌?곸쑝濡??ъ슜?먭? ?쒓컖?뷀븯怨?遺꾩꽍?????덈룄濡??꾨떖?섎뒗 ??怨쇱젙???ㅻ９?덈떎. ?꾩껜 ?먮쫫? **`?쇱꽌 ??MQTT ??FastAPI ??InfluxDB ??Grafana`** ?쒖꽌濡?援ъ꽦?⑸땲??

### 2. 二쇱슂 援ъ꽦 ?붿냼

| 援ъ꽦 ?붿냼 | ??븷 | 二쇱슂 湲곗닠 |
| :--- | :--- | :--- |
| **?쇱꽌 (Sensor)** | 臾쇰━???곗씠??吏꾨룞, ?⑤룄 ??瑜?痢≪젙?섍퀬 ?붿????좏샇濡?蹂?섑븯??MQTT 釉뚮줈而ㅻ줈 ?꾩넚?⑸땲?? | IIoT ?쇱꽌, Edge Device |
| **MQTT 釉뚮줈而?* | ?쇱꽌濡쒕????곗씠?곕? 諛쏆븘 援щ룆??FastAPI)?먭쾶 ?꾨떖?섎뒗 硫붿떆吏 釉뚮줈而???븷???⑸땲?? | Mosquitto, RabbitMQ ??|
| **FastAPI 諛깆뿏??* | MQTT 硫붿떆吏瑜?援щ룆?섍퀬, ?섏떊???곗씠?곕? ?좏슚??寃??諛?泥섎━????InfluxDB????ν빀?덈떎. | Python, FastAPI, Paho-MQTT |
| **InfluxDB** | ?쒓퀎???곗씠?곗뿉 理쒖쟻?붾맂 ?곗씠?곕쿋?댁뒪濡? ?쇱꽌 ?곗씠?곕? ??ν븯怨?鍮좊Ⅸ 議고쉶瑜?吏?먰빀?덈떎. | InfluxDB |
| **Grafana** | InfluxDB????λ맂 ?곗씠?곕? 荑쇰━?섏뿬 ??쒕낫???뺥깭濡??쒓컖?뷀븯怨?紐⑤땲?곕쭅?⑸땲?? | Grafana |

### 3. ?곗씠???먮쫫??(Data Flow Diagram)

```
?뚢??????????  MQTT Publish   ?뚢???????????????  MQTT Subscribe   ?뚢??????????????????  Write   ?뚢????????????  Query   ?뚢?????????????       ?? (Topic: moby/   ??            ??     (Topic:      ??               ??          ??         ??          ??        ???? ?쇱꽌  ?쒋?????????????????????MQTT 釉뚮줈而??쒋????????????????????????FastAPI 諛깆뿏???쒋?????????????InfluxDB ?쒋뾼????????????Grafana ????       ??  sensors/...)   ??            ??  moby/sensors/#)  ??(Data Processor) ??          ??         ??          ??        ???붴??????????                 ?붴???????????????                   ?붴??????????????????          ?붴????????????          ?붴?????꿎??????                                                                                                                        ??                                                                                                                        ??                                                                                                                   ?뚢?????닳??????                                                                                                                   ??        ??                                                                                                                   ??  ?ъ슜?? ??                                                                                                                   ??        ??                                                                                                                   ?붴???????????```

### 4. ?곸꽭 ?곗씠???먮쫫 ?④퀎

1.  **?곗씠???섏쭛 (Sensor)**
    *   ?곗뾽 ?ㅻ퉬??遺李⑸맂 ?쇱꽌(?? 吏꾨룞, ?⑤룄, ?뚰뼢 ?쇱꽌)媛 二쇨린?곸쑝濡?臾쇰━???곹깭瑜?痢≪젙?⑸땲??
    *   痢≪젙???꾨궇濡쒓렇 ?좏샇???붿????곗씠??JSON ?뺤떇)濡?蹂?섎맗?덈떎.
    *   ?곗씠?곗뿉??痢≪젙媛? ??꾩뒪?ы봽, ?쇱꽌 ID ?깆쓽 硫뷀??곗씠?곌? ?ы븿?⑸땲??

2.  **?곗씠??諛쒗뻾 (MQTT Publish)**
    *   ?쇱꽌 ?먮뒗 ?ｌ? ?붾컮?댁뒪??MQTT ?대씪?댁뼵?몃줈??MQTT 釉뚮줈而ㅼ뿉 ?곌껐?⑸땲??
    *   ?섏쭛???곗씠?곕? ?뱀젙 ?좏뵿(Topic)?쇰줈 諛쒗뻾(Publish)?⑸땲?? ?좏뵿? `moby/sensors/vibration/A-01`怨?媛숈씠 怨꾩링??援ъ“瑜?媛吏묐땲??

3.  **?곗씠??援щ룆 諛?泥섎━ (FastAPI Subscribe & Process)**
    *   MOBY ?뚮옯?쇱쓽 FastAPI 諛깆뿏???쒕쾭 ??`MqttClient` ?쒕퉬?ㅺ? MQTT 釉뚮줈ker???곌껐?섏뼱 ?덉뒿?덈떎.
    *   ???쒕퉬?ㅻ뒗 `moby/sensors/#` ? 媛숈? ??쇰뱶移대뱶 ?좏뵿??援щ룆(Subscribe)?섏뿬 紐⑤뱺 ?쇱꽌 ?곗씠?곕? ?섏떊?⑸땲??
    *   硫붿떆吏 ?섏떊 ?? ?곗씠?곕뒗 Pydantic ?ㅽ궎留덈? ?듯빐 ?좏슚?깆씠 寃利앸릺怨??뺢퇋?붾맗?덈떎.
    *   FastAPI???섏떊???곗씠?곕? InfluxDB????ν븯湲??곹빀???뺤떇(Line Protocol ?먮뒗 Point 媛앹껜)?쇰줈 蹂?섑빀?덈떎.

4.  **?곗씠?????(InfluxDB Write)**
    *   FastAPI??`InfluxClient` ?쒕퉬?ㅺ? InfluxDB???곌껐?⑸땲??
    *   蹂?섎맂 ?쒓퀎???곗씠?곕? InfluxDB???뱀젙 踰꾪궥(Bucket)????ν빀?덈떎.
    *   ?곗씠?곕뒗 痢≪젙(Measurement), ?쒓렇(Tags), ?꾨뱶(Fields), ??꾩뒪?ы봽(Timestamp)濡?援ъ꽦?섏뼱 ?⑥쑉?곸씤 荑쇰━媛 媛?ν빐吏묐땲??

5.  **?곗씠???쒓컖??(Grafana Query & Visualization)**
    *   Grafana???곗씠???뚯뒪(Data Source)濡?InfluxDB? ?곕룞?섏뼱 ?덉뒿?덈떎.
    *   ?ъ슜?먮뒗 Grafana ??쒕낫?쒖뿉???뱀젙 ?쇱꽌 ?곗씠?곕굹 吏묎퀎???뺣낫瑜?議고쉶?섎뒗 ?⑤꼸???앹꽦?⑸땲??
    *   媛??⑤꼸? InfluxDB??Flux 荑쇰━瑜??ъ슜?섏뿬 ?곗씠?곕? ?붿껌?섍퀬, Grafana???묐떟諛쏆? ?곗씠?곕? 洹몃옒?? 寃뚯씠吏, ?뚯씠釉????ㅼ뼇???뺥깭濡??쒓컖?뷀븯??蹂댁뿬以띾땲??

6.  **?ъ슜??紐⑤땲?곕쭅**
    *   ?ъ슜?먮뒗 ??釉뚮씪?곗?瑜??듯빐 Grafana ??쒕낫?쒖뿉 ?묒냽?섏뿬 ?쇱꽌 ?곹깭瑜??ㅼ떆媛꾩쑝濡?紐⑤땲?곕쭅?섍퀬 ?댁긽 吏뺥썑瑜??뚯븙?⑸땲??

### 5. 二쇱슂 ?뱀쭠 諛??ㅺ퀎 怨좊젮?ы빆

*   **?붿빱?뚮쭅(Decoupling)**: MQTT 釉뚮줈而ㅻ? ?ъ슜?섏뿬 ?쇱꽌(Publisher)? FastAPI 諛깆뿏??Subscriber)瑜?遺꾨━?덉뒿?덈떎. ?대? ?듯빐 媛?援ъ꽦 ?붿냼瑜??낅┰?곸쑝濡??뺤옣?섍굅??援먯껜?????덉뒿?덈떎.
*   **?뺤옣??Scalability)**: MQTT???섎쭖? ?쇱꽌 ?곌껐???⑥쑉?곸쑝濡?泥섎━?????덉쑝硫? FastAPI? InfluxDB ??떆 ?섑룊???뺤옣???⑹씠?섏뿬 ?洹쒕え ?곗씠??泥섎━???곹빀?⑸땲??
*   **?ㅼ떆媛꾩꽦(Real-time)**: Push 湲곕컲??MQTT ?꾨줈?좎퐳怨?鍮좊Ⅸ ?곌린/?쎄린 ?깅뒫??媛吏?InfluxDB??議고빀?쇰줈 ?곗씠???섏쭛遺???쒓컖?붽퉴吏??吏???쒓컙??理쒖냼?뷀븯??嫄곗쓽 ?ㅼ떆媛꾩뿉 媛源뚯슫 紐⑤땲?곕쭅 ?섍꼍???쒓났?⑸땲??
*   **紐⑤뱢??Modularity)**: 媛?而댄룷?뚰듃???⑥씪 梨낆엫 ?먯튃???곕씪 紐낇솗????븷???섑뻾?⑸땲?? ?덈? ?ㅼ뼱, FastAPI???곗씠??泥섎━ 諛???μ쓣, Grafana???쒓컖?붾? ?꾨떞?섏뿬 ?좎?蹂댁닔?깆쓣 ?믪엯?덈떎.
