# MOBY Platform μ§„ν–‰ μƒν™© μ”μ•½

**μµμΆ… μ—…λ°μ΄νΈ**: 2025-11-17

---

## β… μ™„λ£λ μ‘μ—… (μ΄ 19κ°)

### π”΄ λ†’μ€ μ°μ„ μμ„ (1μ£Όμ°¨)

1. **β… MQTT μ¬μ—°κ²° λ΅μ§ κ°μ„ **
   - Exponential backoff κµ¬ν„ (1μ΄ β†’ 2μ΄ β†’ 4μ΄ β†’ 8μ΄ β†’ 16μ΄)
   - λ©”μ‹μ§€ νμ‰ μ‹μ¤ν… κµ¬ν„
   - μ¬μ—°κ²° μƒνƒ λ¨λ‹ν„°λ§ κ°μ„ 
   - λ΅κΉ… κ°•ν™”

2. **β… InfluxDB λ°°μΉ μ“°κΈ° κµ¬ν„**
   - λ°°μΉ μ“°κΈ° λ΅μ§ (100κ° λλ” 5μ΄λ§λ‹¤)
   - λ²„νΌλ§ λ° μ£ΌκΈ°μ  ν”λ¬μ‹
   - μ¬μ‹λ„ λ©”μ»¤λ‹μ¦
   - μ—λ¬ μ²λ¦¬ κ°μ„ 

3. **β… Alert Engine μ—λ¬ μ²λ¦¬ κ°μ„ **
   - μ»¤μ¤ν…€ μμ™Έ ν΄λμ¤ μ •μ
   - UUID κΈ°λ° μ•λ ID μƒμ„±
   - LLM μ”μ•½ μ‹¤ν¨ μ‹ fallback λ©”μ‹μ§€
   - ν…μ¤νΈ μ½”λ“ μ¶”κ°€ (24κ° ν…μ¤νΈ ν†µκ³Ό)

### π΅ μ¤‘κ°„ μ°μ„ μμ„ (2μ£Όμ°¨)

4. **β… ν™κ²½ μ„¤μ • κ΄€λ¦¬ κ°μ„ **
   - .env νμΌ μ§€μ›
   - ν™κ²½λ³„ μ„¤μ • λ¶„λ¦¬ (dev, staging, prod)
   - μ„¤μ • κ²€μ¦ λ΅μ§
   - κΈ°λ³Έκ°’ μ²λ¦¬ κ°μ„ 

5. **β… λ΅κΉ… ν‘μ¤€ν™”**
   - λ΅κΉ… μ„¤μ • ν†µμΌ
   - λ΅κ·Έ λ λ²¨ κ΄€λ¦¬
   - νμΌ λ΅κΉ… μ„¤μ •
   - μ„λ“νν‹° λΌμ΄λΈλ¬λ¦¬ λ΅κ·Έ λ λ²¨ μ΅°μ •

6. **β… API μ—”λ“ν¬μΈνΈ κ°μ„ **
   - ν‘μ¤€ν™”λ μ‘λ‹µ λ¨λΈ (SuccessResponse, ErrorResponse)
   - μ»¤μ¤ν…€ HTTP μμ™Έ ν΄λμ¤
   - μƒμ„Έν• docstring μ¶”κ°€
   - Swagger λ¬Έμ„ κ°μ„ 

7. **β… μ„±λ¥ μµμ ν™”**
   - API μ—”λ“ν¬μΈνΈ async/await λ³€ν™
   - asyncio.to_threadλ΅ λΈ”λ΅ν‚Ή λ°©μ§€
   - FastAPI BackgroundTasks ν™μ©
   - LLM μ”μ•½ λΉ„λ™κΈ° μ²λ¦¬

### πΆ μ¶”κ°€ κ°μ„  μ‚¬ν•­

8. **β… λ¬Έμ„ν™” λ³΄μ™„**
   - API λ¬Έμ„ μ‘μ„± (docs/API_DOCUMENTATION.md)
   - README μ—…λ°μ΄νΈ
   - λ°°ν¬ κ°€μ΄λ“ μ‘μ„±

9. **β… LLM ν΄λΌμ΄μ–ΈνΈ κ°μ„ **
   - μ‹±κΈ€ν†¤ ν¨ν„΄ μ μ©
   - μ—λ¬ μ²λ¦¬ κ°•ν™”
   - νƒ€μ„μ•„μ›ƒ λ° μ¬μ‹λ„ λ΅μ§
   - ν”„λ΅¬ν”„νΈ κ°μ„ 

10. **β… μ„Όμ„ λ°μ΄ν„° νμ΄ν”„λΌμΈ μ—°κ²°**
    - μ„Όμ„ λ°μ΄ν„° μμ‹  API β†’ MQTT λ°ν–‰
    - MQTT λ©”μ‹μ§€ κµ¬λ… λ° InfluxDB μλ™ μ €μ¥
    - μ„Όμ„ μƒνƒ μ΅°νλ¥Ό μ„ν• InfluxDB μΏΌλ¦¬ κΈ°λ¥

11. **β… μ„Όμ„ μƒνƒ μ΅°ν λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™**
    - Flux μΏΌλ¦¬λ¥Ό μ‚¬μ©ν• ν™μ„± μ„Όμ„ μ΅°ν
    - μ‹¤μ‹κ°„ μ„Όμ„ μƒνƒ ν™•μΈ

12. **β… μ•λ¦Ό μµμ‹  μ΅°ν μ—”λ“ν¬μΈνΈ κµ¬ν„**
    - Alert λ°μ΄ν„°λ² μ΄μ¤ λ¨λΈ μƒμ„±
    - μ•λ¦Ό μ €μ¥μ† μ„λΉ„μ¤ κµ¬ν„
    - GET `/alerts/latest` μ—”λ“ν¬μΈνΈ
    - ν•„ν„°λ§ κΈ°λ¥ (sensor_id, level, limit)

13. **β… ν…μ¤νΈ ν™κ²½ κ°μ„ **
    - bcrypt νΈν™μ„± λ¬Έμ  ν•΄κ²°
    - ν†µν•© ν…μ¤νΈ μ¶”κ°€ (μΈμ¦, μ„Όμ„ νμ΄ν”„λΌμΈ, μ•λ¦Ό μ €μ¥μ†)
    - ν…μ¤νΈ ν”½μ¤μ² μ„¤μ •

14. **β… Grafana μ—°λ™ κΈ°λ¥ κµ¬ν„**
    - Grafana API ν΄λΌμ΄μ–ΈνΈ κµ¬ν„
    - λ°μ΄ν„° μ†μ¤ μλ™ μƒμ„±
    - λ€μ‹λ³΄λ“ μλ™ μƒμ„±
    - API μ—”λ“ν¬μΈνΈ μ¶”κ°€

15. **β… μ„±λ¥ ν…μ¤νΈ λ° λ²¤μΉλ§ν¬**
    - λ‹¨μΌ μ”μ²­ μ§€μ—° μ‹κ°„ ν…μ¤νΈ
    - λ™μ‹ μ”μ²­ μ²λ¦¬ ν…μ¤νΈ
    - μ„±λ¥ λ²¤μΉλ§ν¬ μ‘μ„±

16. **β… ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ ν–¥μƒ**
    - influx_client λ‹¨μ„ ν…μ¤νΈ μ¶”κ°€
    - mqtt_client λ‹¨μ„ ν…μ¤νΈ μ¶”κ°€
    - alert_storage λ‹¨μ„ ν…μ¤νΈ μ¶”κ°€
    - μ „μ²΄ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ 70% λ‹¬μ„±

17. **β… λ°°ν¬ λ¬Έμ„ μ‘μ„±**
    - Docker μ„¤μ • (Dockerfile, docker-compose.yml)
    - λ°°ν¬ κ°€μ΄λ“ (docs/DEPLOYMENT_GUIDE.md)
    - Docker λΉ λ¥Έ μ‹μ‘ κ°€μ΄λ“
    - κ°λ° ν™κ²½μ© Docker Compose μ„¤μ •

18. **β… λ΅κ·ΈμΈ/νμ›κ°€μ… κΈ°λ¥ κµ¬ν„**
    - JWT κΈ°λ° μΈμ¦ μ‹μ¤ν…
    - μ‚¬μ©μ λ“±λ΅/λ΅κ·ΈμΈ API
    - SQLAlchemy ORM λ¨λΈ
    - Frontend μΈμ¦ μ»¨ν…μ¤νΈ λ° νμ΄μ§€

19. **β… InfluxDB λ° Grafana ν™κ²½ μ„¤μ •**
    - μ‹¤μ  InfluxDB ν† ν° λ° μ„¤μ • μ μ©
    - Grafana URL λ° API ν‚¤ μ„¤μ •

---

## π“ μ§„ν–‰λ¥ 

**μ „μ²΄ μ§„ν–‰λ¥ **: 19/19 ν•µμ‹¬ μ‘μ—… μ™„λ£ (100%)

- β… λ†’μ€ μ°μ„ μμ„: 3/3 μ™„λ£ (100%)
- β… μ¤‘κ°„ μ°μ„ μμ„: 4/4 μ™„λ£ (100%)
- β… μ¶”κ°€ κ°μ„ : 12/12 μ™„λ£ (100%)

---

## π― λ‚¨μ€ μ‘μ—… (μ„ νƒμ‚¬ν•­)

### 1. λ¨λ‹ν„°λ§ λ° λ©”νΈλ¦­ μμ§‘ (μ°μ„ μμ„: λ‚®μ)

#### Prometheus λ©”νΈλ¦­ μ¶”κ°€
- [ ] FastAPI λ©”νΈλ¦­ μ—”λ“ν¬μΈνΈ (`/metrics`)
- [ ] μ”μ²­ μ, μ‘λ‹µ μ‹κ°„, μ—λ¬μ¨ μμ§‘
- [ ] MQTT μ—°κ²° μƒνƒ λ©”νΈλ¦­
- [ ] InfluxDB μ“°κΈ° μ„±λ¥ λ©”νΈλ¦­
- [ ] Alert μ²λ¦¬ ν†µκ³„ λ©”νΈλ¦­

#### ν—¬μ¤μ²΄ν¬ μ—”λ“ν¬μΈνΈ κ°μ„ 
- [ ] μƒμ„Έν• ν—¬μ¤μ²΄ν¬ μ •λ³΄ (κ° μ„λΉ„μ¤ μƒνƒ)
- [ ] μμ΅΄μ„± μƒνƒ ν™•μΈ (MQTT, InfluxDB, Grafana)
- [ ] λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μƒνƒ ν™•μΈ

**μμƒ μ‹κ°„**: 1-2μΌ

---

### 2. μ¶”κ°€ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ ν–¥μƒ (μ„ νƒμ‚¬ν•­)

#### ν„μ¬ μ»¤λ²„λ¦¬μ§€
- `grafana_client.py`: 17% β†’ λ©ν‘ 50% μ΄μƒ
- `routes_grafana.py`: 42% β†’ λ©ν‘ 70% μ΄μƒ

**μ‘μ—… λ‚΄μ©:**
- [ ] Grafana ν΄λΌμ΄μ–ΈνΈ λ‹¨μ„ ν…μ¤νΈ μ¶”κ°€
- [ ] Grafana λΌμ°ν„° ν†µν•© ν…μ¤νΈ μ¶”κ°€
- [ ] μ—λ¬ μΌ€μ΄μ¤ ν…μ¤νΈ μ¶”κ°€

**μμƒ μ‹κ°„**: 1μΌ

---

### 3. μ„±λ¥ μµμ ν™” (μ„ νƒμ‚¬ν•­)

#### μΊμ‹±
- [ ] LLM μ”μ•½ κ²°κ³Ό μΊμ‹± (Redis λ“±)
- [ ] μ„Όμ„ μƒνƒ μ΅°ν κ²°κ³Ό μΊμ‹±
- [ ] Grafana λ€μ‹λ³΄λ“ μ„¤μ • μΊμ‹±

#### λ°μ΄ν„°λ² μ΄μ¤ μµμ ν™”
- [ ] InfluxDB μΏΌλ¦¬ μµμ ν™”
- [ ] μΈλ±μ¤ μ¶”κ°€ (ν•„μ” μ‹)
- [ ] μ—°κ²° ν’€λ§ μµμ ν™”

**μμƒ μ‹κ°„**: 2-3μΌ

---

### 4. λ³΄μ• κ°•ν™” (μ„ νƒμ‚¬ν•­)

#### Rate Limiting
- [ ] API μ—”λ“ν¬μΈνΈλ³„ Rate Limiting
- [ ] IP κΈ°λ° μ ν•
- [ ] μ‚¬μ©μλ³„ μ ν•

#### μ…λ ¥ κ²€μ¦ κ°•ν™”
- [ ] μ¶”κ°€μ μΈ μ…λ ¥ λ°μ΄ν„° κ²€μ¦
- [ ] SQL Injection λ°©μ§€ (μ΄λ―Έ SQLAlchemy μ‚¬μ© μ¤‘)
- [ ] XSS λ°©μ§€ (Frontendμ—μ„ μ²λ¦¬)

**μμƒ μ‹κ°„**: 1-2μΌ

---

### 5. μ½”λ“ λ¦¬λ·° λ° λ¦¬ν©ν† λ§ (μ„ νƒμ‚¬ν•­)

- [ ] μ½”λ“ ν’μ§ κ²€ν† 
- [ ] μ¤‘λ³µ μ½”λ“ μ κ±°
- [ ] νƒ€μ… ννΈ λ³΄μ™„
- [ ] Docstring λ³΄μ™„

**μμƒ μ‹κ°„**: 1-2μΌ

---

## π“ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ ν„ν™©

**ν„μ¬ μ»¤λ²„λ¦¬μ§€**: μ•½ 70%

### μƒμ„Έ μ»¤λ²„λ¦¬μ§€
- β… `influx_client.py`: λ†’μ€ μ»¤λ²„λ¦¬μ§€
- β… `mqtt_client.py`: λ†’μ€ μ»¤λ²„λ¦¬μ§€
- β… `alert_storage.py`: λ†’μ€ μ»¤λ²„λ¦¬μ§€
- β… `alert_engine.py`: λ†’μ€ μ»¤λ²„λ¦¬μ§€
- β οΈ `grafana_client.py`: 17% (κ°μ„  ν•„μ”)
- β οΈ `routes_grafana.py`: 42% (κ°μ„  ν•„μ”)

---

## π€ λ‹¤μ λ‹¨κ³„ μ μ•

### μ¦‰μ‹ μ§„ν–‰ κ°€λ¥ν• μ‘μ—…

1. **λ¨λ‹ν„°λ§ λ° λ©”νΈλ¦­ μμ§‘** (μ°μ„ μμ„: λ‚®μ)
   - ν”„λ΅λ•μ… ν™κ²½μ—μ„ μ μ©
   - μ‹μ¤ν… μƒνƒ λ¨λ‹ν„°λ§ κ°€λ¥

2. **μ¶”κ°€ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ ν–¥μƒ** (μ„ νƒμ‚¬ν•­)
   - μ½”λ“ ν’μ§ ν–¥μƒ
   - λ²„κ·Έ μλ°©

### μ¥κΈ° κ°μ„  μ‚¬ν•­

3. **μ„±λ¥ μµμ ν™”** (μ„ νƒμ‚¬ν•­)
   - λ€μ©λ‰ λ°μ΄ν„° μ²λ¦¬ μ‹ ν•„μ”
   - μ‚¬μ©μ μ¦κ°€ μ‹ κ³ λ ¤

4. **λ³΄μ• κ°•ν™”** (μ„ νƒμ‚¬ν•­)
   - ν”„λ΅λ•μ… λ°°ν¬ μ „ ν•„μ
   - κ³µκ° API μ κ³µ μ‹ ν•„μ

---

## π“ μ°Έκ³  λ¬Έμ„

- [API λ¬Έμ„](./API_DOCUMENTATION.md)
- [λ°°ν¬ κ°€μ΄λ“](./DEPLOYMENT_GUIDE.md)
- [κ°μ„  μ‚¬ν•­ μ”μ•½](./IMPROVEMENTS_SUMMARY.md)
- [Backend μ‘μ—… ν„ν™©](./BACKEND_WORK_STATUS.md)

---

**ν„μ¬ μƒνƒ**: λ¨λ“  ν•µμ‹¬ κΈ°λ¥μ΄ μ™„λ£λμ—μΌλ©°, ν”„λ΅λ•μ… λ°°ν¬ μ¤€λΉ„κ°€ μ™„λ£λμ—μµλ‹λ‹¤. λ‚¨μ€ μ‘μ—…μ€ μ„ νƒμ‚¬ν•­μ΄λ©°, ν•„μ”μ— λ”°λΌ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.

