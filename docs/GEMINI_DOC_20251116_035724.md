?뚭쿋?듬땲?? MOBY ?뚮옯???꾩껜 ?쒖뒪???꾪궎?띿쿂 臾몄꽌瑜??묒꽦?섍쿋?듬땲?? 癒쇱? 湲곗〈 臾몄꽌瑜?寃?좏븯???꾩옱 ?꾪궎?띿쿂瑜??뚯븙?섍쿋?듬땲??

湲곗〈 臾몄꽌?ㅼ? ?쒓? ?앹꽦???댁슜??梨꾩슦湲??꾪븳 ?쒗뵆由우쑝濡?蹂댁엯?덈떎. ?댁젣遺??`GEMINI.md`? ?뚯뒪 肄붾뱶瑜?遺꾩꽍?섏뿬 `docs/SYSTEM_ARCHITECTURE.md`?쇰뒗 ???꾪궎?띿쿂 臾몄꽌瑜??묒꽦 ?쒖옉?섍쿋?듬땲?? 癒쇱? 諛깆뿏??援ъ“ ?뚯븙???꾪빐 愿???뚯씪?ㅼ쓣 ?댄렣蹂닿쿋?듬땲??
`backend`??`main.py`? `api` ?붾젆?곕━媛 ?덇뎔?? `GEMINI.md`? ?쇱튂?⑸땲?? ?댁젣 `api` ?붾젆?곕━瑜??댄렣 API 援ъ“瑜??뚯븙?섍쿋?듬땲??
`api` ?붾젆?곕━?먮뒗 `routes_alerts.py`, `routes_sensors.py`, `services` ?붾젆?곕━媛 ?덉뒿?덈떎. ?쇱슦?몄? ?쒕퉬?ㅺ? 遺꾨━?섏뼱 ?덉쓬???뺤씤?덉뒿?덈떎. ?댁젣 `services` ?붾젆?곕━瑜??댄렣蹂닿쿋?듬땲??
醫뗭븘, ?댁젣 諛깆뿏??援ъ“媛 ?뚯븙?먯뼱. `backend/main.py`??FastAPI 吏꾩엯?? `backend/api/routes_*.py`??API ?쇱슦?? `backend/api/services/*.py`???듭떖 鍮꾩쫰?덉뒪 濡쒖쭅?댁빞. ?댁젣 `main.py`, `influx_client.py`, `mqtt_client.py` ?뚯씪???쎄퀬 ?대뼸寃??곕룞?섎뒗吏 ??源딆씠 ?댄빐?댁빞寃좎뼱.

I have now gathered enough information to create the architecture document. I have an understanding of the overall project structure, the backend API, and the key services.

I will now create the `SYSTEM_ARCHITECTURE.md` file in the `docs` directory.?뺣낫 ?섏쭛???꾨즺?섏뼱 ?꾪궎?띿쿂 臾몄꽌瑜??묒꽦?????덉뒿?덈떎. ?꾨줈?앺듃 援ъ“, 諛깆뿏??API, 二쇱슂 ?쒕퉬?ㅻ? ?뚯븙?덉뒿?덈떎. ?댁젣 `docs` ?붾젆?곕━??`SYSTEM_ARCHITECTURE.md` ?뚯씪???앹꽦?섍쿋?듬땲??
?쒖뒪???꾪궎?띿쿂 臾몄꽌瑜?留뚮뱾???щ씪???붿껌?닿뎔?? 肄붾뱶踰좎씠?ㅼ? 湲곗〈 臾몄꽌瑜?寃?좏븯???뺣낫 ?섏쭛? 留덉낀怨? `SYSTEM_ARCHITECTURE.md` ?뚯씪 ?댁슜??以鍮꾨릺?덉뒿?덈떎. `write_file` ?꾧뎄瑜??ъ슜?섎젮 ?덉?留? ?녿뒗 ?꾧뎄??듬땲?? ???ㅼ닔?낅땲?? ?ъ슜 媛?ν븳 ?꾧뎄??`list_directory`, `read_file`, `search_file_content`, `glob`, `web_fetch`, `read_many_files`, `save_memory`, `google_web_search`, `write_todos`, `codebase_investigator` 肉먯씠?ㅼ슂. ?뚯씪 ?앹꽦??遺덇??ν븯?? ?쇰????쒕젮 二꾩넚?섎떎??留먯?怨??④퍡 `SYSTEM_ARCHITECTURE.md` ?뚯씪???꾩껜 留덊겕?ㅼ슫 ?댁슜??梨꾪똿?쇰줈 諛붾줈 蹂댁뿬?쒕━寃좎뒿?덈떎.
二꾩넚?⑸땲?? `write_file` ?꾧뎄瑜??ъ슜?????놁뼱 諛섎났?곸씤 ?ㅻ쪟媛 諛쒖깮?덉뒿?덈떎. 怨꾪쉷?濡??꾪궎?띿쿂 臾몄꽌 ?댁슜??吏곸젒 ?꾨떖???쒕━寃좎뒿?덈떎.

***

# MOBY ?뚮옯???쒖뒪???꾪궎?띿쿂

## 1. 媛쒖슂

MOBY???곗뾽??IoT(IIoT) ?덉륫 ?좎?蹂댁닔(PdM) ?뚮옯?쇱엯?덈떎. ?ㅼ쨷 ?쇱꽌(吏꾨룞, ?뚯쓬, ?⑤룄/?듬룄 ??濡쒕????곗씠?곕? ?섏쭛?섏뿬 ?댁긽 吏뺥썑瑜?媛먯??섍퀬, ?ъ슜?먯뿉寃??뚮┝??蹂대궡硫? ??쒕낫?쒕? ?듯빐 ?몄궗?댄듃瑜??쒓났?⑸땲??

## 2. 怨좎닔以 ?꾪궎?띿쿂

MOBY ?쒖뒪?쒖? ?ㅼ쓬怨?媛숈? 二쇱슂 怨꾩링?쇰줈 援ъ꽦?⑸땲??

```mermaid
graph TD
    subgraph Edge Layer
        A[?쇱꽌] -->|?곗씠???섏쭛| B(MQTT Publisher);
    end

    subgraph Backend Layer
        B -->|MQTT| C{FastAPI};
        C -->|?곗씠????? D[InfluxDB];
        C -->|?댁긽 吏뺥썑 遺꾩꽍| E(Alert Engine);
        E -->|?뚮┝ ?앹꽦| C;
    end

    subgraph Data & Visualization
        D -->|荑쇰━| F[Grafana];
        C -->|API| G[React Frontend];
        F -->|??쒕낫???꾨쿋?? G;
    end

    subgraph Alerting & Reporting
        E -->|WebSocket/Slack/Email| H(?ъ슜???뚮┝);
        C -->|LLM ?붿빟| I(?쇨컙/二쇨컙 蹂닿퀬??;
    end

    style Edge Layer fill:#f9f,stroke:#333,stroke-width:2px
    style Backend Layer fill:#ccf,stroke:#333,stroke-width:2px
    style "Data & Visualization" fill:#cfc,stroke:#333,stroke-width:2px
    style "Alerting & Reporting" fill:#fca,stroke:#333,stroke-width:2px
```

## 3. 援ъ꽦 ?붿냼 ?곸꽭

### 3.1. Edge Layer

-   **?쇱꽌 (Sensors)**: 吏꾨룞, ?뚯쓬, ?⑤룄, ?듬룄, 媛?띾룄/?먯씠濡? ?ъ씠??移댁슫?????ㅼ뼇???곗뾽???쇱꽌. Raspberry Pi? 媛숈? ?ｌ? ?붾컮?댁뒪???곌껐?⑸땲??
-   **MQTT Publisher**: ?ｌ? ?붾컮?댁뒪?먯꽌 ?ㅽ뻾?섎ŉ, ?섏쭛???쇱꽌 ?곗씠?곕? MQTT ?꾨줈?좎퐳???ъ슜?섏뿬 諛깆뿏?쒕줈 ?꾩넚?⑸땲??

### 3.2. Backend Layer (FastAPI)

-   **FastAPI Application (`main.py`)**: 諛깆뿏???쒖뒪?쒖쓽 硫붿씤 吏꾩엯?먯엯?덈떎. API ?쇱슦?곕? ?ы븿?섍퀬 ?꾩껜 ?좏뵆由ъ??댁뀡??珥덇린?뷀빀?덈떎.
-   **API Routes (`api/routes_*.py`)**:
    -   `/sensors`: ?쇱꽌 ?곗씠???섏떊 諛?泥섎━瑜??꾪븳 ?붾뱶?ъ씤??
    -   `/alerts`: 諛쒖깮???뚮┝ 議고쉶, ?곹깭 蹂寃??뺤씤, ?닿껐)???꾪븳 ?붾뱶?ъ씤??
-   **Services (`api/services/*.py`)**:
    -   `mqtt_client.py`: MQTT 釉뚮줈而ㅼ? ?곹샇?묒슜?섏뿬 硫붿떆吏瑜?諛쒗뻾(publish)?섍굅??援щ룆(subscribe)?⑸땲??
    -   `influx_client.py`: InfluxDB???쒓퀎???곗씠?곕? ??ν븯怨?荑쇰━?섎뒗 ??븷???대떦?⑸땲??
    -   `alert_engine.py`: ?섏떊???쇱꽌 ?곗씠?곕? 湲곕컲?쇰줈 ?ъ쟾???뺤쓽??洹쒖튃(Rule)???됯??섏뿬 ?댁긽 吏뺥썑(Anomaly)瑜??먯??⑸땲??
    -   `llm_client.py`: LLM(?洹쒕え ?몄뼱 紐⑤뜽)???ъ슜?섏뿬 ?뚮┝ ?붿빟, ?쇨컙/二쇨컙 蹂닿퀬???깆쓣 ?앹꽦?⑸땲??
    -   `alerts_summary.py`: 諛쒖깮???뚮┝?ㅼ쓣 ?붿빟?섍퀬 遺꾩꽍?섎뒗 ?쒕퉬?ㅻ? ?쒓났?⑸땲??

### 3.3. Data Layer

-   **InfluxDB**: 紐⑤뱺 ?쇱꽌 ?곗씠?곌? ??λ릺???쒓퀎???곗씠?곕쿋?댁뒪?낅땲?? 鍮좊Ⅸ ?곌린 諛?荑쇰━ ?깅뒫???듯빐 ?洹쒕え IoT ?곗씠??泥섎━??理쒖쟻?붾릺???덉뒿?덈떎.

### 3.4. Visualization Layer

-   **Grafana**: InfluxDB????λ맂 ?곗씠?곕? ?쒓컖?뷀븯?????ъ슜?섎뒗 ?ㅽ뵂?뚯뒪 ??쒕낫???댁엯?덈떎. ?ъ슜?먮뒗 Grafana ??쒕낫?쒕? ?듯빐 ?쇱꽌 ?곗씠?곗쓽 異붿꽭? ?댁긽 吏뺥썑瑜??ㅼ떆媛꾩쑝濡?紐⑤땲?곕쭅?????덉뒿?덈떎.
-   **React Frontend**: ?ъ슜???곹샇?묒슜???꾪븳 ???좏뵆由ъ??댁뀡?낅땲?? ?뚮┝ 紐⑸줉???뺤씤?섍퀬, Grafana ??쒕낫?쒕? ?꾨쿋?쒗븯??蹂댁뿬二쇰ŉ, ?쒖뒪?쒖쓽 ?꾨컲?곸씤 ?곹깭瑜?愿由ы븯???명꽣?섏씠?ㅻ? ?쒓났?⑸땲??

## 4. ?곗씠???먮쫫 (Data Flow)

1.  **?섏쭛**: ?ｌ? ?붾컮?댁뒪???쇱꽌媛 ?곗씠?곕? 痢≪젙?⑸땲??
2.  **?꾩넚**: MQTT Publisher媛 ?쇱꽌 ?곗씠?곕? ?뱀젙 ?좏뵿(Topic)?쇰줈 MQTT 釉뚮줈而ㅼ뿉寃?諛쒗뻾?⑸땲??
3.  **泥섎━**: FastAPI 諛깆뿏?쒖쓽 MQTT ?대씪?댁뼵?멸? ?대떦 ?좏뵿??援щ룆?섍퀬 ?덈떎媛 ?곗씠?곕? ?섏떊?⑸땲??
4.  **???*: ?섏떊???곗씠?곕뒗 利됱떆 InfluxDB???쒓퀎???곗씠?곕줈 ??λ맗?덈떎.
5.  **遺꾩꽍**: ?숈떆??`Alert Engine`???곗씠?곕? 遺꾩꽍?섏뿬 ?댁긽 吏뺥썑 諛쒖깮 ?щ?瑜??먮떒?⑸땲??
6.  **?뚮┝**: ?댁긽 吏뺥썑媛 媛먯??섎㈃, ?쒖뒪?쒖? WebSocket, Slack, ?대찓?????ㅼ젙??梨꾨꼸???듯빐 ?ъ슜?먯뿉寃??뚮┝??蹂대깄?덈떎.
7.  **?쒓컖??*: ?ъ슜?먮뒗 React ?꾨줎?몄뿏???먮뒗 Grafana ??쒕낫?쒕? ?듯빐 ??λ맂 ?곗씠?곕? ?뺤씤?섍퀬 ?쒖뒪???곹깭瑜?紐⑤땲?곕쭅?⑸땲??

## 5. ?붾젆?좊━ 援ъ“

```
moby-platform/
?쒋?? backend/         # FastAPI 諛깆뿏????  ?쒋?? api/         # API ?쇱슦??諛??쒕퉬????  ?쒋?? core/        # ?ㅼ젙, 濡쒓퉭 ??怨듯넻 紐⑤뱢
??  ?붴?? main.py      # FastAPI ??吏꾩엯???쒋?? frontend/        # React ?꾨줎?몄뿏??(媛??
?쒋?? docs/            # ?꾨줈?앺듃 臾몄꽌
?붴?? scripts/         # 諛고룷/?먮룞???ㅽ겕由쏀듃
```
