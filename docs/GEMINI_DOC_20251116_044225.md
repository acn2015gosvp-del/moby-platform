Loaded cached credentials.
# MOBY 諛깆뿏???꾪궎?띿쿂 湲곗닠 由щ럭

## 1. MOBY 諛깆뿏???듭떖 ?붾젆?좊━ ??븷 (?댁긽??援ъ“ 湲곗?)

MOBY 諛깆뿏???쒖뒪?쒖? 愿?ъ궗 遺꾨━(Separation of Concerns) ?먯튃???곕씪 ?ㅼ쓬怨?媛숈? ?듭떖 ?붾젆?좊━ 援ъ“瑜?吏?ν빐???⑸땲??

-   **`api/`**
    -   **??븷**: API ?붾뱶?ъ씤??Endpoint) ?뺤쓽 諛?HTTP ?붿껌/?묐떟 泥섎━.
    -   **?ㅻ챸**: FastAPI??`APIRouter`瑜??ъ슜?섏뿬 ?쇱슦?낆쓣 愿由ы빀?덈떎. ?대씪?댁뼵?몃줈遺???ㅼ뼱???붿껌???섏떊?섏뿬 ?좏슚?깆쓣 寃利앺븯怨? `services` 怨꾩링???곸젅??鍮꾩쫰?덉뒪 濡쐋ogics瑜??몄텧???? 洹?寃곌낵瑜?HTTP ?묐떟?쇰줈 諛섑솚?섎뒗 ??븷??吏묒쨷?⑸땲??

-   **`services/`**
    -   **??븷**: ?듭떖 鍮꾩쫰?덉뒪 濡쒖쭅(Business Logic) 援ы쁽.
    -   **?ㅻ챸**: ?좏뵆由ъ??댁뀡??二쇱슂 湲곕뒫???섑뻾?섎뒗 ?쒕퉬???대옒???먮뒗 ?⑥닔瑜??ы븿?⑸땲?? ?덈? ?ㅼ뼱, `AlertEngine`? 蹂移??먯? 洹쒖튃???ㅽ뻾?섍퀬, `InfluxClient`??InfluxDB????곗씠???듭떊???대떦?⑸땲?? `api` 怨꾩링?쇰줈遺???낅┰?곸쑝濡??ㅺ퀎?섏뼱 ?ъ궗?⑹꽦怨??뚯뒪???⑹씠?깆쓣 ?믪엯?덈떎.

-   **`schemas/`**
    -   **??븷**: ?곗씠???좏슚??寃利?諛?吏곷젹??Serialization) 紐⑤뜽 ?뺤쓽.
    -   **?ㅻ챸**: Pydantic `BaseModel`???ъ슜?섏뿬 API ?붿껌 蹂몃Ц(Request Body), ?묐떟(Response), 荑쇰━ ?뚮씪誘명꽣 ?깆쓽 ?곗씠???뺤떇???뺤쓽?⑸땲?? ?대? ?듯빐 API ?명꽣?섏씠?ㅼ쓽 ?곗씠??臾닿껐?깆쓣 蹂댁옣?섍퀬, ?먮룞?쇰줈 API 臾몄꽌瑜??앹꽦?섎뒗 ???쒖슜?⑸땲?? ?곗씠?곕쿋?댁뒪 紐⑤뜽怨쇰뒗 遺꾨━??DTO(Data Transfer Object) ??븷???섑뻾?⑸땲??

-   **`models/`**
    -   **?춉al**: ?곗씠?곕쿋?댁뒪 ?뚯씠釉붽낵 留ㅽ븨?섎뒗 ORM(Object-Relational Mapping) 紐⑤뜽 ?뺤쓽.
    _   **?ㅻ챸**: SQLModel ?먮뒗 SQLAlchemy `Base`瑜??곸냽諛쏆븘 ?곗씠?곕쿋?댁뒪???뚯씠釉?援ъ“瑜??뚯씠???대옒?ㅻ줈 ?뺤쓽?⑸땲?? ?곗씠?곗쓽 ?곸냽??Persistence)??愿由ы븯硫? ?뚯씠釉?媛꾩쓽 愿怨?Relationship)瑜??ㅼ젙?섎뒗 ??븷???⑸땲??

-   **`core/`**
    -   **??븷**: ?좏뵆由ъ??댁뀡 ?꾩뿭?먯꽌 ?ъ슜?섎뒗 ?듭떖 湲곕컲 湲곕뒫 諛??ㅼ젙 愿由?
    -   **?ㅻ챸**: `.env` ?뚯씪???쎌뼱?ㅻ뒗 ?ㅼ젙(`config.py`), 濡쒓퉭(`logger.py`), ?곗씠?곕쿋?댁뒪 而ㅻ꽖???대씪?댁뼵??珥덇린?????꾨줈?앺듃??湲곕컲???섎뒗 紐⑤뱢?ㅼ쓣?띸쉰?⑸땲?? ?뱀젙 ?꾨찓?몄뿉 醫낆냽?섏? ?딅뒗 怨듯넻 湲곕뒫?ㅼ씠 ?꾩튂?⑸땲??

## 2. ?꾩옱 援ъ“???μ젏

?꾩옱 MOBY 諛깆뿏?쒓? 吏?ν븯??媛쒕뀗??怨꾩링 援ъ“???ㅼ쓬怨?媛숈? ?μ젏??媛吏묐땲??

-   **愿?ъ궗 遺꾨━ (Separation of Concerns)**: `api`(?쒗쁽), `services`(濡쒖쭅), `models`(?곗씠?? 怨꾩링??紐낇솗??遺꾨━?섏뼱 肄붾뱶??梨낆엫怨???븷??遺꾨챸?댁쭛?덈떎.
-   **?좎?蹂댁닔 ?⑹씠??*: ?뱀젙 湲곕뒫 ?섏젙 ?? 愿?⑤맂 怨꾩링??肄붾뱶留?吏묒쨷?곸쑝濡?蹂대㈃ ?섎?濡?蹂寃쎌쓽 ?곹뼢 踰붿쐞瑜??덉륫?섍린 ?쎄퀬 ?좎?蹂댁닔媛 ?몃━?⑸땲??
-   **?뚯뒪???⑹씠??*: 鍮꾩쫰?덉뒪 濡쒖쭅??`services`??吏묒쨷?섏뼱 ?덉뼱, HTTP ?붿껌/?묐떟怨?臾닿??섍쾶 濡쒖쭅 ?먯껜??????⑥쐞 ?뚯뒪??Unit Test) ?묒꽦???⑹씠?⑸땲??
-   **?뺤옣??*: ?ν썑 ?덈줈??湲곕뒫 異붽? ?? 媛?怨꾩링???꾩슂???뚯씪??異붽??섎뒗 諛⑹떇?쇰줈 泥닿퀎?곸씤 ?뺤옣??媛?ν빀?덈떎. ?덈? ?ㅼ뼱, ?덈줈??MQTT ?쇱꽌 ?곗씠??泥섎━媛 ?꾩슂?섎㈃ `services`????濡쒖쭅?? `schemas`???곗씠???뺤떇??異붽??섎뒗 ?앹쑝濡???묓븷 ???덉뒿?덈떎.

## 3. 媛쒖꽑???꾩슂??援ъ“??臾몄젣

?꾩옱 ?뚯씪 ?쒖뒪?쒖뿉 援ы쁽??援ъ“???댁긽?곸씤 媛쒕뀗怨??щ━ ?ш컖??臾몄젣瑜?媛吏怨??덉뒿?덈떎.

-   **鍮꾨끉由ъ쟻??源딆? 以묒꺽 援ъ“ (Deep & Illogical Nesting)**:
    -   ?꾩옱 `schemas`, `models`, `core` ?붾젆?좊━媛 `api/services/` ?대???留ㅼ슦 源딄퀬 蹂듭옟?섍쾶 以묒꺽?섏뼱 ?덉뒿?덈떎. (`api/services/schemas/models/core/config.py`)
    -   ?대뒗 媛?而댄룷?뚰듃???낅┰?깆쓣 ?댁튂怨? ?꾨줈?앺듃 援ъ“??????댄빐瑜?洹밸룄濡??대졄寃?留뚮벊?덈떎. ?덈? ?ㅼ뼱, ?꾩뿭 ?ㅼ젙 ?뚯씪(`config.py`)????`services`??`schemas` ?붾젆?좊━ ?꾨옒???덈뒗吏 ?ㅻ챸?????놁뒿?덈떎.

-   **?쒗솚 李몄“(Circular Dependency) ?꾪뿕 利앷?**:
    -   `services`媛 `schemas`瑜?import?섍퀬, `schemas` ?대???`models`媛 ?ㅼ떆 `services`???ㅻⅨ 遺遺꾩쓣 import?댁빞 ?섎뒗 ?곹솴??諛쒖깮?????덉뒿?덈떎. ?대윭??援ъ“???쒗솚 李몄“ ?ㅻ쪟瑜??좊컻??媛?μ꽦??留ㅼ슦 ?믪뒿?덈떎.

-   **??? 肄붾뱶 諛쒓껄 媛?μ꽦 (Poor Discoverability)**:
    -   ?덈줈??媛쒕컻?먭? ?꾨줈?앺듃???ъ엯?섏뿀???? ORM 紐⑤뜽??李얘린 ?꾪빐 `api/services/schemas/models`源뚯? ?먯깋?댁빞 ?섎뒗 ??肄붾뱶???꾩튂瑜?吏곴??곸쑝濡??뚯븙?섍린 ?대졄?듬땲??

-   **`schemas`? `models`????븷 紐⑦샇??*:
    -   `schemas`??API ?곗씠???꾩넚 媛앹껜(DTO)????븷?? `models`??DB ?곸냽??媛앹껜????븷???댁빞 ?⑸땲?? ?꾩옱 援ъ“泥섎읆 `models`媛 `schemas`???섏쐞???덈뒗 寃껋? ????븷??寃쎄퀎瑜?紐⑦샇?섍쾶 留뚮뱾???쇰????쇨린?⑸땲??

## 4. ?κ린???뺤옣?깆쓣 ?꾪븳 由ы뙥?좊쭅 ?꾨왂

?꾩뿉???쒓린??援ъ“??臾몄젣瑜??닿껐?섍퀬 ?κ린?곸씤 ?뺤옣?깆쓣 ?뺣낫?섍린 ?꾪빐 ?ㅼ쓬怨?媛숈? 由ы뙥?좊쭅???쒖븞?⑸땲??

### 紐⑺몴: 諛깆뿏???붾젆?좊━ 援ъ“ ?됲깂??(Flattening)

?꾩옱??源딆? 以묒꺽 援ъ“瑜??댁냼?섍퀬, 媛?而댄룷?뚰듃媛 `backend` 猷⑦듃 ?꾨옒?먯꽌 ?낅┰?곸씤 理쒖긽???붾젆?좊━濡?議댁옱?섎룄濡?援ъ“瑜?蹂寃쏀빀?덈떎.

**?댁긽?곸씤 紐⑺몴 援ъ“:**
```
backend/
?쒋?? main.py         # FastAPI ?좏뵆由ъ??댁뀡 珥덇린???쒋?? api/            # API ?쇱슦??(?붾뱶?ъ씤??
?쒋?? services/       # 鍮꾩쫰?덉뒪 濡쒖쭅
?쒋?? schemas/        # Pydantic ?ㅽ궎留?(DTOs)
?쒋?? models/         # ORM 紐⑤뜽 (DB ?뚯씠釉?
?붴?? core/           # ?ㅼ젙, 濡쒓퉭, DB ?대씪?댁뼵????```

### 由ы뙥?좊쭅 ?ㅽ뻾 怨꾪쉷

1.  **?좉퇋 理쒖긽???붾젆?좊━ ?앹꽦**: `backend` 猷⑦듃??`core/`, `models/`, `schemas/` ?붾젆?좊━瑜??앹꽦?⑸땲??

2.  **?뚯씪 ?대룞**:
    -   **Core**: `backend/api/services/schemas/models/core/` ?댁쓽 `config.py`, `logger.py` ?깆쓽 ?뚯씪?ㅼ쓣 `backend/core/`濡??대룞?⑸땲??
    -   **Schemas**: `backend/api/services/schemas/` ?꾨옒???덈뜕 `alert_schema.py`, `sensor_schema.py` ?깆쓣 `backend/schemas/`濡??대룞?⑸땲??
    -   **Models**: `backend/api/services/schemas/models/` ?꾨옒???덈뜕 ?ㅼ젣 ORM 紐⑤뜽 ?뚯씪?ㅼ쓣 `backend/models/`濡??대룞?⑸땲??

3.  **?꾩껜 Import 寃쎈줈 ?섏젙**:
    -   媛??以묒슂?섍퀬 ?쒓컙??留롮씠 ?뚯슂?섎뒗 ?④퀎?낅땲??
    -   `api`, `services` ??紐⑤뱺 諛깆뿏??肄붾뱶 ?뚯씪??寃?좏븯?? ?뚯씪 ?대룞?쇰줈 ?명빐 蹂寃쎈맂 import 寃쎈줈瑜?紐⑤몢 ?섏젙?⑸땲??
    -   **?덉떆**:
        -   `from .services.schemas.alert_schema import Alert` -> `from ..schemas.alert_schema import Alert` (?뚯씪 ?꾩튂???곕씪 ?곷? 寃쎈줈 議곗젙)
        -   ?덈? 寃쎈줈 ?ъ슜??沅뚯옣: `from backend.schemas.alert_schema import Alert`

4.  **湲곗〈 ?붾젆?좊━ ??젣**: ?뚯씪 ?대룞 諛?import 寃쎈줈 ?섏젙???꾨즺???? 鍮꾩뼱?덈뒗 湲곗〈??以묒꺽???붾젆?좊━??`api/services/schemas/` ??????젣?섏뿬 由ы뙥?좊쭅???꾨즺?⑸땲??

### 湲곕? ?④낵

-   **紐낇솗???꾨줈?앺듃 援ъ“**: ?꾨줈?앺듃??援ъ“媛 吏곴??곸씠怨??⑥닚?댁졇 ?꾧뎄???쎄쾶 ?댄빐?????덉뒿?덈떎.
-   **?쒗솚 李몄“ 臾몄젣 ?닿껐**: 而댄룷?뚰듃 媛??섏〈??諛⑺뼢??`api` ??`services` ??`models`/`core`濡?紐낇솗?댁졇 ?쒗솚 李몄“???꾪뿕???먯쿇?곸쑝濡?媛먯냼?⑸땲??
-   **?앹궛???μ긽**: 媛쒕컻?먭? ?꾩슂???뚯씪??李얜뒗 ???쒕뒗 ?쒓컙??以꾩뼱?ㅺ퀬, 肄붾뱶 ?묒꽦 ?쒖뿉??紐낇솗??援ъ“ ?뺣텇???앹궛?깆씠 ?μ긽?⑸땲??
-   **誘몃옒 ?뺤옣???뺣낫**: ?ν썑 留덉씠?щ줈?쒕퉬?ㅻ줈 ?꾪솚?섍굅???덈줈???꾨찓?몄쓣 異붽????? ??遺꾨━??援ъ“ ?뺣텇???좎뿰?섍퀬 鍮좊Ⅴ寃???묓븷 ???덉뒿?덈떎.
